[build-system]
requires = ['setuptools>=60,<80', 'wheel']
build-backend = 'setuptools.build_meta'

[project]
name = 'lattifai'
version = '1.2.2'
description = "Lattifai Python SDK: Seamless Integration with Lattifai's Speech and Video AI Services"
keywords = ['lattifai', 'speech recognition', 'video analysis', 'ai', 'sdk', 'api client']
readme = 'README.md'
license = {file = 'LICENSE'}
authors = [
  { name = 'Lattifai Technologies', email = 'tech@lattifai.com' },
]
maintainers = [
  { name = 'Lattice', email = 'tech@lattifai.com' },
]
requires-python = '>=3.10,<3.15'

classifiers = [
    'Development Status :: 5 - Production/Stable',
    'Intended Audience :: Developers',
    'Intended Audience :: Science/Research',
    'License :: OSI Approved :: Apache Software License',
    'Programming Language :: Python :: 3.10',
    'Programming Language :: Python :: 3.11',
    'Programming Language :: Python :: 3.12',
    'Programming Language :: Python :: 3.13',
    'Programming Language :: Python :: 3.14',
    'Operating System :: MacOS :: MacOS X',
    'Operating System :: POSIX :: Linux',
    'Operating System :: Microsoft :: Windows',
    'Topic :: Multimedia :: Sound/Audio',
    'Topic :: Multimedia :: Video',
    'Topic :: Scientific/Engineering :: Artificial Intelligence',
]
dependencies = [
    "lattifai[core]",
    "lattifai[alignment]",
    "lattifai[transcription]",
    "lattifai[workflow]",
    "lattifai[server]"
]

[project.optional-dependencies]
# Core dependencies, previously in the main dependencies section
core = [
    "k2py>=0.2.1",
    "lattifai-core>=0.6.0",
    "lattifai-captions[splitting]>=0.1.0",  # Caption format handling + sentence splitting
    "lattifai-run>=1.0.1",
    "python-dotenv",
    "msgpack",
    "scipy!=1.16.3",
    "av",
]
# Minimal installation for alignment only (no PyTorch required)
alignment = [
    "lhotse>=1.26.0",
    "colorful>=0.5.6",
    "onnxruntime",
    "error-align-fix>=0.1.4",
]
# G2P support for OOV words (requires PyTorch)
alignment-g2p = [
    "lattifai[alignment]",
    "g2p-phonemizer>=0.4.0",
]
# transcription & diarization
transcription = [
    # transcription
    "OmniSenseVoice>=0.4.2",
    "nemo_toolkit_asr[asr]>=2.7.0rc4",
    "google-genai>=1.22.0",
    # diarization
    "pyannote-audio-notorchdeps>=4.0.2"
]
# workflow
workflow = [
    "questionary>=2.0",
    "yt-dlp",
    "pycryptodome"
]
# server
server = [
    "fastapi>=0.111.0",
    "uvicorn>=0.30.0",
    "python-multipart>=0.0.9",
    "jinja2>=3.1.4"
]
# development dependencies
dev = [
    "pytest>=8.0.0",
    "pytest-cov>=4.1.0",
    "pytest-asyncio>=0.23.0",
]


[project.urls]
Homepage = 'https://github.com/lattifai/lattifai-python'
Documentation = 'https://github.com/lattifai/lattifai-python/blob/main/README.md'
'Bug Tracker' = 'https://github.com/lattifai/lattifai-python/issues'
Discussions = 'https://github.com/lattifai/lattifai-python/discussions'
Changelog = 'https://github.com/lattifai/lattifai-python/blob/main/CHANGELOG.md'

[project.scripts]
"lai-align" = "lattifai.cli.alignment:main"
"lai-youtube" = "lattifai.cli.youtube:main"
"lai-transcribe" = "lattifai.cli.transcribe:main"
"lai-diarize" = "lattifai.cli.diarization:main"
"laicap-convert" = "lattifai.cli.caption:main_convert"
"laicap-normalize" = "lattifai.cli.caption:main_normalize"
"laicap-shift" = "lattifai.cli.caption:main_shift"
"laicap-diff" = "lattifai.cli.caption:main_diff"

[project.entry-points."lai_run.cli"]
alignment = "lattifai.cli"
caption = "lattifai.cli"
transcribe = "lattifai.cli"
diarization = "lattifai.cli"

[tool.setuptools.packages.find]
where = ["src"]
namespaces = true
exclude = ["lattifai.caption", "lattifai.caption.*"]

[tool.setuptools.package-dir]
"" = "src"

[tool.setuptools]
include-package-data = true

[tool.setuptools.package-data]
"lattifai.transcription.prompts" = ["**/*.txt", "**/*.md"]

[tool.pytest.ini_options]
addopts = "--durations=10"
testpaths = ["tests"]
