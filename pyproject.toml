[build-system]
requires = ['setuptools>=60,<80', 'wheel']
build-backend = 'setuptools.build_meta'

[project]
name = 'lattifai'
version = '1.0.4'
description = "Lattifai Python SDK: Seamless Integration with Lattifai's Speech and Video AI Services"
keywords = ['lattifai', 'speech recognition', 'video analysis', 'ai', 'sdk', 'api client']
readme = 'README.md'
license = {file = 'LICENSE'}
authors = [
  { name = 'Lattifai Technologies', email = 'tech@lattifai.com' },
]
maintainers = [
  { name = 'Lattice', email = 'tech@lattifai.com' },
]
requires-python = '>=3.10,<3.15'

dependencies = [
    "lattifai-core>=0.5.0",
    "lattifai-run>=1.0.1",
    "python-dotenv",
    "lhotse>=1.26.0",
    "colorful>=0.5.6",
    "pysubs2",
    "praatio",
    "tgt",
    "onnx>=1.16.0",
    "onnxruntime",
    "msgpack",
    "g2p-phonemizer>=0.4.0",
    "av",
    "wtpsplit>=2.1.7",
    # transcription
    "kaldi-native-fbank",
    "OmniSenseVoice>=0.4.0",
    "nemo_toolkit_asr[asr]>=2.7.0rc1",
    # diarization
    "pyannote-audio-notorchdeps>=4.0.2",  # not requires torch==2.8.0, torchaudio==2.8.0
    # agentic workflow
    "questionary>=2.0",
    "yt-dlp",
    "pycryptodome",
    "google-genai>=1.22.0",
    # web
    "fastapi>=0.111.0",
    "uvicorn>=0.30.0",
    "python-multipart>=0.0.9",
    "jinja2>=3.1.4",
]


classifiers = [
    'Development Status :: 5 - Production/Stable',
    'Intended Audience :: Developers',
    'Intended Audience :: Science/Research',
    'License :: OSI Approved :: Apache Software License',
    'Programming Language :: Python :: 3.10',
    'Programming Language :: Python :: 3.11',
    'Programming Language :: Python :: 3.12',
    'Programming Language :: Python :: 3.13',
    'Programming Language :: Python :: 3.14',
    'Operating System :: MacOS :: MacOS X',
    'Operating System :: POSIX :: Linux',
    'Operating System :: Microsoft :: Windows',
    'Topic :: Multimedia :: Sound/Audio',
    'Topic :: Multimedia :: Video',
    'Topic :: Scientific/Engineering :: Artificial Intelligence',
]

[project.urls]
Homepage = 'https://github.com/lattifai/lattifai-python'
Documentation = 'https://github.com/lattifai/lattifai-python/blob/main/README.md'
'Bug Tracker' = 'https://github.com/lattifai/lattifai-python/issues'
Discussions = 'https://github.com/lattifai/lattifai-python/discussions'
Changelog = 'https://github.com/lattifai/lattifai-python/blob/main/CHANGELOG.md'

[project.scripts]
"lai-align" = "lattifai.cli.alignment:main"
"lai-youtube" = "lattifai.cli.youtube:main"
"lai-transcribe" = "lattifai.cli.transcribe:main"
"laicap-convert" = "lattifai.cli.caption:main_convert"
"laicap-normalize" = "lattifai.cli.caption:main_normalize"
"laicap-shift" = "lattifai.cli.caption:main_shift"
"lai-server" = "lattifai.cli.server:main"
"lai-app-install" = "lattifai.cli.app_installer:main"

[project.entry-points."lai_run.cli"]
alignment = "lattifai.cli"
caption = "lattifai.cli"
transcribe = "lattifai.cli"

[tool.setuptools]
packages = [
    "lattifai",
    "lattifai.alignment",
    "lattifai.config",
    "lattifai.caption",
    "lattifai.diarization",
    "lattifai.server",
    "lattifai.transcription",
    "lattifai.transcription.prompts",
    "lattifai.workflow",
    "lattifai.cli",
]
include-package-data = true

[tool.setuptools.package-dir]
lattifai = "src/lattifai"

[tool.setuptools.package-data]
"lattifai.transcription.prompts" = ["**/*.txt", "**/*.md"]
"lattifai" = ["app/**/*"]

[project.optional-dependencies]
numpy = ['numpy']
diarization = [
    "torch-audiomentations==0.12.0",  # not constraint to torchaudio>=0.9.0,<2.9
    "pyannote.audio>=4.0.2",  # Requires torch==2.8.0, torchaudio==2.8.0
]
transcription = [
    "OmniSenseVoice>=0.4.0",
    "nemo_toolkit_asr[asr]>=2.7.0rc1",
]
test = ['pytest', 'pytest-cov', 'pytest-asyncio', 'numpy']
all = [
    "numpy",
    "pytest",
    "pytest-cov",
    "pytest-asyncio",
    "pyannote.audio>=4.0.2",
]

[tool.pytest.ini_options]
addopts = "--durations=10"
testpaths = ["tests"]

[tool.coverage.run]
omit = [
]

[dependency-groups]
dev = [
    "pytest>=8.0.0",
    "pytest-cov>=4.1.0",
    "pytest-asyncio>=0.23.0",
]
